from telegram import Update, ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters, CallbackQueryHandler
import random

TOKEN = "7876853359:AAG5nuDuuSXjKXBDHykVepqCAIVeZdqYkRk"
ADMIN_USERNAME = 280969220  # ID –∞–¥–º–∏–Ω–∞

keyboard = [
    ["–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è", "–°–µ–º–µ–π–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è"],
    ["–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–µ—Å—Å–∏—è", "–£—Å–ª–æ–≤–∏—è"],
    ["–û–±–æ –º–Ω–µ"]
]
markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)

session_keyboard = [
    ["üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", "üìù –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É"]
]
session_markup = ReplyKeyboardMarkup(session_keyboard, resize_keyboard=True)

applications = {}
application_counter = 1  # –°—á–µ—Ç—á–∏–∫ –∑–∞—è–≤–æ–∫

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥ –ï–≤—ã –ö—É–ª–∏–∫ –≤—ã–±–µ—Ä–∏ –∏–∑ –º–µ–Ω—é —á—Ç–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç", reply_markup=markup)

async def reply(update: Update, context: ContextTypes.DEFAULT_TYPE):
    global application_counter
    text = update.message.text
    user_id = update.message.from_user.id

    if text in ["–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è", "–°–µ–º–µ–π–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è", "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–µ—Å—Å–∏—è"]:
        if text == "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è":
            response = (
                "‚ñ´Ô∏è <b>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è ‚Äî 50 –º–∏–Ω.</b>\n\n"
                "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å–µ—Å—Å–∏—è –Ω–∞ –ª—é–±–æ–π –≤–æ–ª–Ω—É—é—â–∏–π –≤–∞—Å –≤–æ–ø—Ä–æ—Å. –ß–∞—Å—Ç–æ —Ç–µ–º—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã –∏ –∫–∞—Å–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π –∂–∏–∑–Ω–∏, –º–æ–∂–Ω–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –ª—é–±–æ–π –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –∞—Å–ø–µ–∫—Ç.\n\n"
                "<b>–° —á–µ–º —è —Ä–∞–±–æ—Ç–∞—é:</b>\n"
                "‚Ä¢ –õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ. –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π, —Ä–∞–∑–≤–∏—Ç–∏–µ –ª–∏—á–Ω–æ—Å—Ç–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.\n"
                "‚Ä¢ –ë–∞–ª–∞–Ω—Å –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–∏–ª.\n"
                "‚Ä¢ –ü–æ–∏—Å–∫ —Å–µ–±—è. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ.\n"
                "‚Ä¢ –°–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç—å –∏ —Å–µ–∫—Å.\n"
                "‚Ä¢ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ—É—á–∏–Ω–≥.\n"
                "‚Ä¢ –õ–∏—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã. –ì—Ä–∞–Ω–∏—Ü—ã –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.\n"
                "‚Ä¢ –ì–∞—Ä–º–æ–Ω–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—ã.\n"
                "‚Ä¢ –°–µ–º–µ–π–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. –†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–æ–π. –ó–∞—Ç—è–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –æ—Å—Ç—Ä—ã–µ —Å—Å–æ—Ä—ã.\n"
                "‚Ä¢ –î–µ–ø—Ä–µ—Å—Å–∏–∏, –Ω–∏–∑–∫–æ-—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.\n"
                "‚Ä¢ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—Å—Ç-—Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º.\n\n"
                "–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ —è –∏—Å–ø–æ–ª—å–∑—É—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—É—á–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –°–∏–Ω—Ç–µ–∑ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –∫–æ—É—á–∏–Ω–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.\n\n"
                "–ù–µ—É–∫–æ—Å–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–±–ª—é–¥–∞—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —ç—Ç–∏–∫—É –∏ –ª–∏—á–Ω—É—é —Ç–∞–π–Ω—É –∫–ª–∏–µ–Ω—Ç–∞.\n\n"
                "–í–µ—Ä—é —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—Å—è –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å. –õ—é–±—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –≤–∞—à–∏–º —Ä–µ—Å—É—Ä—Å–æ–º –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º –∫ —Ä–æ—Å—Ç—É –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º.\n\n"
                "–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –æ–±—É—á—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º —Å–∞–º–æ–ø–æ–º–æ—â–∏."
            )
        elif text == "–°–µ–º–µ–π–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è":
            response = (
                "‚ñ´Ô∏è <b>–°–µ–º–µ–π–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è ‚Äî 50 –º–∏–Ω.</b>\n\n"
                "–°–µ–º–µ–π–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ø–∞—Ä–Ω—ã—Ö –∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π.\n"
                "–í–æ–∑–º–æ–∂–Ω–∞ –º–µ–¥–∏–∞—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–º –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —ç—Å–∫–∞–ª–∞—Ü–∏—é –≤ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–º.\n\n"
                "<b>–ö–ª—é—á–µ–≤—ã–µ —Ü–µ–ª–∏ —Å–µ–º–µ–π–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏:</b>\n"
                "1. –£–ª—É—á—à–∏—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é\n"
                "2. –ù–∞—É—á–∏—Ç—å—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã\n"
                "3. –£–∫—Ä–µ–ø–∏—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ –∏ —á—É–≤—Å—Ç–≤–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏\n"
                "4. –ü—Ä–æ—è—Å–Ω–∏—Ç—å —Ä–æ–ª–∏, –≥—Ä–∞–Ω–∏—Ü—ã –∏ –æ–∂–∏–¥–∞–Ω–∏—è\n"
                "5. –†–∞–∑–≤–∏—Ç—å –Ω–∞–≤—ã–∫–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π\n"
                "6. –ü–æ–≤—ã—Å–∏—Ç—å —ç–º–ø–∞—Ç–∏—é –∏ –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ\n"
                "7. –°–Ω–∏–∑–∏—Ç—å —Å–µ–º–µ–π–Ω—ã–π —Å—Ç—Ä–µ—Å—Å –∏ —É–ª—É—á—à–∏—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—é\n"
                "8. –°–∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–¥—Ö–æ–¥—ã\n"
                "   ‚Ä¢ –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –≤–æ—Å–ø–∏—Ç–∞–Ω–∏—è, –ø—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è\n"
                "9. –ü–æ–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –º–µ–∂–ø–æ–∫–æ–ª–µ–Ω—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏\n"
                "10. –°–æ–∑–¥–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ —Å–µ–º–µ–π–Ω—ã–µ —Ä–∏—Ç—É–∞–ª—ã –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç"
            )
        elif text == "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–µ—Å—Å–∏—è":
            response = (
                "‚ñ´Ô∏è <b>–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–µ—Å—Å–∏—è ‚Äî 50 –º–∏–Ω.</b>\n\n"
                "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Å–µ—Å—Å–∏—è, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å check-up –∫—Ç–æ —è —Å–µ–π—á–∞—Å, –≥–¥–µ –∏ –∫—É–¥–∞ –∏–¥—É. –û—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –≤ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏ –ø–æ –≤—Å–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É.\n\n"
                "<b>–í —Ö–æ–¥–µ —Å–µ—Å—Å–∏–∏:</b>\n"
                "‚Ä¢ –°—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –æ–±—â–µ–µ –≤–∏–¥–µ–Ω–∏–µ –∏ —Ü–µ–ª–∏\n"
                "‚Ä¢ –û—Ü–µ–Ω–∏—Ç—å –≤–Ω–µ—à–Ω—é—é —Å—Ä–µ–¥—É –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–Ω–¥—ã\n"
                "‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ–±—è/—Å–≤–æ–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞/–∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞\n"
                "‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å 3‚Äì5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –Ω–∞ 1‚Äì3 –≥–æ–¥–∞\n"
                "‚Ä¢ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏–∑–º–µ—Ä–∏–º—ã–µ —Ü–µ–ª–∏\n"
                "‚Ä¢ –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ—Ä–æ–∂–Ω—É—é –∫–∞—Ä—Ç—É –∏ –ø–æ—Ä—Ç—Ñ–µ–ª—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤\n"
                "‚Ä¢ –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏ –≤—ã—è–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏\n"
                "‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–µ—Ö–∞–Ω–∏–∑–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n"
                "‚Ä¢ –£—Å–∏–ª–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—é —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Ñ–∏–≥—É—Ä–∞–º–∏ –Ω–∞ –ø—É—Ç–∏\n"
                "‚Ä¢ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏"
            )
        
        await update.message.reply_text(response, reply_markup=session_markup, parse_mode='HTML')
        context.user_data["session_type"] = text

    elif text == "–£—Å–ª–æ–≤–∏—è":
        conditions = (
            "üìú <b>–£—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å–µ—Å—Å–∏–π</b>\n\n"
            "‚è≥ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî 50 –º–∏–Ω—É—Ç.\n"
            "üí≥ –°—Ç–æ–∏–º–æ—Å—Ç—å ‚Äî 6000—Ä\n\n"
            "üí≥ –ó–∞–ø–∏—Å—å –ø–æ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ, –¥–æ –≤–Ω–µ—Å–µ–Ω–∏—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞ –≤–∞–º–∏ –Ω–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ.\n\n"
            "üîÑ <b>–ü–µ—Ä–µ–Ω–æ—Å –∏–ª–∏ –æ—Ç–º–µ–Ω–∞:</b>\n"
            "‚Ä¢ –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ –∏–ª–∏ –æ—Ç–º–µ–Ω–∏–ª–∏ —Ä–∞–Ω–µ–µ, —á–µ–º –∑–∞ 24 —á–∞—Å–∞ ‚Äî –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 100% –æ–±—ä–µ–º–µ.\n"
            "‚Ä¢ –í —Å–ª—É—á–∞–µ –æ—Ç–º–µ–Ω—ã –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –ø–æ–∑–∂–µ —á–µ–º –∑–∞ 24 —á–∞—Å–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã.\n"
            "‚Ä¢ –ï—Å–ª–∏ –≤—ã –Ω–µ –ø—Ä–∏—à–ª–∏ –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.\n\n"
            "üì© –ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏ –∏ –¥–µ—Ç–∞–ª–∏ –≤—Å—Ç—Ä–µ—á–∏.\n\n"
            "<b>–£—Å–ª–æ–≤–∏—è –≤—Å—Ç—Ä–µ—á–∏:</b>\n"
            "‚Ä¢ –ú—ã —Å–æ–∑–≤–∞–Ω–∏–≤–∞–µ–º—Å—è –≤ WhatsApp –∏–ª–∏ Skype –∞—É–¥–∏–æ–∑–≤–æ–Ω–∫–æ–º\n"
            "‚Ä¢ –í–∞–∂–Ω–æ –∏–º–µ—Ç—å —Ö–æ—Ä–æ—à–∏–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ —Å–ª—ã—à–Ω—ã–º\n"
            "‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –º–µ—Å—Ç–µ\n"
            "‚Ä¢ –í —à—É–º–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–∫–∞—Ñ–µ, —É–ª–∏—Ü–∞) —Ä–∞–±–æ—Ç–∞ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∞\n"
            "‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—É—à–Ω–∏–∫–∏\n"
            "‚Ä¢ –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ –ª–∏—Å—Ç –±—É–º–∞–≥–∏ –∏ —Ä—É—á–∫—É"
        )
        await update.message.reply_text(conditions, reply_markup=markup, parse_mode='HTML')

    elif text == "–û–±–æ –º–Ω–µ":
        about = (
            "üë©üèª‚Äçüíº –Ø –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ—É—á, –≤–µ–¥—É—â–∏–π —á–∞—Å—Ç–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É –≤ –ú–æ—Å–∫–≤–µ –∏ –æ–Ω–ª–∞–π–Ω –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.\n\n"
            "–°–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–µ–ª–æ–≤–µ–∫—É –º–∏—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∂–∏—Ç—å –∏ –≤–æ–ø–ª–æ—â–∞—Ç—å —Å–µ–±—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –±–æ–ª—å—à–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –¥—É—à–∏, –≥–¥–µ –ø–æ–∑–Ω–∞–≤–∞—è –∏ —Å–º–µ—à–∏–≤–∞—è –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã —Å–≤–æ–µ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –≤—ã –ø–æ–∑–Ω–∞–µ—Ç–µ –∏ —Ç–≤–æ—Ä–∏—Ç–µ —Å–µ–±—è, self-made. –í—ã - –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏. –ò –≤–∞–∂–Ω–æ —á—Ç–æ–±—ã –≤—ã –±—ã–ª–∏ –∏–º –¥–æ–≤–æ–ª—å–Ω—ã. –ö–∞–∫–æ–π –≤—ã —á–µ–ª–æ–≤–µ–∫ –∏ –∫–∞–∫–∏–º —Ö–æ—Ç–∏—Ç–µ —Å–µ–±—è —Å–¥–µ–ª–∞—Ç—å.\n\n"
            "–ü—Ä–∏ —ç—Ç–æ–º —Ä–µ—à–∞—è –∑–∞–¥–∞—á–∏ –æ —Ç–æ–º, –∫–∞–∫ —Ö–æ—Ä–æ—à–æ –∂–∏—Ç—å –≤–æ –≤–Ω–µ—à–Ω–µ–π –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –∫–∞–∫ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏, –∫—É–¥–∞ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ –∏ –∫–∞–∫ –≤–æ –≤—Å–µ –ø—Ä–µ—É—Å–ø–µ–≤–∞—Ç—å.\n\n"
            "–ö–∞–∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å–≤–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏ –≤–Ω–µ—à–Ω–µ–µ, –Ω–∏—á–µ–≥–æ –≤–∞–∂–Ω–æ–≥–æ –Ω–µ —É—Ç—Ä–∞—Ç–∏–≤, —Å–æ–∑–∏–¥–∞—è —ç—Ç–æ –≤—Å–µ –≤ –∫—Ä–∞—Å–∏–≤—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å.\n\n"
            "<b>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</b>\n"
            "‚Ä¢ –í—ã—Å—à–µ–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ¬´–ø—Å–∏—Ö–æ–ª–æ–≥¬ª –∏ ¬´–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏¬ª) ‚Äî –¥–∏–ø–ª–æ–º 2007 –≥.\n"
            "‚Ä¢ \"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ—Ü–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π\" 2006–≥.\n"
            "‚Ä¢ –ö–æ—É—á–∏–Ω–≥ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –í—ã—Å—à–∞—è —à–∫–æ–ª–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ (–°–æ—á–∏) 2007-09–≥–≥\n"
            "‚Ä¢ –ù–µ–π—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥ (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –∫–æ—Ä—Ä–µ–∫—Ü–∏—è) –ù–ò–ò —Ü–¥–Ω –∏–º –õ—É—Ä–∏—è 2016 –≥.\n"
            "‚Ä¢ –ü—Ä–æ—Ñ –ø–µ—Ä–µ–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å \"–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥\", \"–ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\". - –¥–∏–ø–ª–æ–º 2024-25–≥–≥\n"
            "‚Ä¢ –ò –¥—Ä –æ–±—É—á–µ–Ω–∏—è –≤ —Å—Ñ–µ—Ä–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö.\n\n"
            "–° 2007 –≥–æ–¥–∞ –≤–µ–¥—É —á–∞—Å—Ç–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç."
        )
        await update.message.reply_text(about, reply_markup=markup, parse_mode='HTML')

    elif text == "üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é":
        await update.message.reply_text("–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.", reply_markup=markup)

    elif text == "üìù –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É":
        await update.message.reply_text(
            "üì© –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –∏–º—è –∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–µ—Å—Å–∏–∏. –Ø —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏!"
        )
        context.user_data["awaiting_application"] = True

    elif context.user_data.get("awaiting_application"):
        session_type = context.user_data.get("session_type", "–Ω–µ —É–∫–∞–∑–∞–Ω–æ")
        application_number = application_counter
        application_counter += 1
        
        user_info = (
            f"üîî –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ #{application_number}\n\n"
            f"–¢–∏–ø —Å–µ—Å—Å–∏–∏: {session_type}\n"
            f"–û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: @{update.message.from_user.username or '–Ω–µ—Ç username'}\n"
            f"ID: {user_id}\n\n"
            f"–°–æ–æ–±—â–µ–Ω–∏–µ:\n{text}"
        )

        reply_markup = InlineKeyboardMarkup([
            [InlineKeyboardButton("‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å", callback_data=f"confirm_{user_id}_{application_number}")],
            [InlineKeyboardButton("üïí –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è", callback_data=f"reschedule_{user_id}_{application_number}")],
            [InlineKeyboardButton("‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å", callback_data=f"cancel_{user_id}_{application_number}")]
        ])

        applications[application_number] = {
            "user_id": user_id,
            "type": session_type,
            "message": text,
            "status": "pending"
        }

        admin_message = await context.bot.send_message(
            chat_id=ADMIN_USERNAME,
            text=user_info,
            reply_markup=reply_markup
        )

        applications[application_number]["admin_message_id"] = admin_message.message_id

        await update.message.reply_text(
            "‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –Ø —Å–∫–æ—Ä–æ —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏.", 
            reply_markup=markup
        )
        context.user_data.clear()

async def button_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    action, user_id, app_number = query.data.split('_')
    user_id = int(user_id)
    app_number = int(app_number)
    
    if query.from_user.id != ADMIN_USERNAME:
        await query.answer("–í—ã –Ω–µ –∞–¥–º–∏–Ω!")
        return

    application = applications.get(app_number)
    if not application:
        await query.answer("–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!")
        return

    if action == "confirm":
        await context.bot.send_message(
            chat_id=user_id,
            text=f"üéâ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ #{app_number} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! –ñ–¥—É –≤–∞—Å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è."
        )
        application["status"] = "confirmed"
        await query.edit_message_text(
            text=f"‚úÖ –ó–∞—è–≤–∫–∞ #{app_number} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞\n\n{query.message.text}"
        )

    elif action == "reschedule":
        await context.bot.send_message(
            chat_id=user_id,
            text=f"üïí –ü–æ –∑–∞—è–≤–∫–µ #{app_number}: –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –≤–∞—Å –≤—Ä–µ–º—è –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:"
        )
        application["status"] = "rescheduling"
        await query.edit_message_text(
            text=f"‚è≥ –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞—è–≤–∫–∏ #{app_number}\n\n{query.message.text}"
        )

    elif action == "cancel":
        await context.bot.send_message(
            chat_id=user_id,
            text=f"‚ùå –í–∞—à–∞ –∑–∞—è–≤–∫–∞ #{app_number} –±—ã–ª–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è."
        )
        application["status"] = "canceled"
        await query.edit_message_text(
            text=f"‚ùå –ó–∞—è–≤–∫–∞ #{app_number} –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞\n\n{query.message.text}"
        )

    await query.answer()

app = ApplicationBuilder().token(TOKEN).build()
app.add_handler(CommandHandler("start", start))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, reply))
app.add_handler(CallbackQueryHandler(button_callback))

app.run_polling()
